<%= simple_form_for VendorQuote.new,
      url: rfq_vendor_quotes_path(rfq),
      html: { class: 'needs-validation', novalidate: true } do |f| %>

  <!-- Header -->
  <div class="mb-4">
    <h3>
      <i class="bi bi-chat-quote me-2"></i>
      Enter Quote â€“ <%= supplier.display_name %>
    </h3>
    <p class="text-muted">Provide pricing and delivery details for this RFQ</p>
  </div>

  <!-- Errors -->
  <div id="quoteFormErrors" class="alert alert-danger d-none"></div>

  <!-- Hidden -->
  <%= f.hidden_field :supplier_id, value: supplier.id %>

  <!-- Item Selection -->
  <div class="mb-4">
    <%= f.input :rfq_item_id,
        collection: rfq.rfq_items.order(:line_number),
        label_method: :display_name,
        value_method: :id,
        required: true,
        input_html: {
          class: 'form-control form-control-lg',
          id: 'itemSelect',
          include_blank: false
        },
        hint: 'Select which item you are providing a quote for' %>
  </div>

  <!-- Item Details -->
  <div id="itemDetails" class="alert alert-info d-none mb-4">
    <h6 class="mb-2">
      <i class="bi bi-info-circle me-2"></i>Item Details
    </h6>
    <div class="row">
      <div class="col-md-4">
        <small class="text-muted">Quantity Requested</small><br>
        <strong id="itemQty"></strong>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Target Price</small><br>
        <strong id="itemTargetPrice"></strong>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Required By</small><br>
        <strong id="itemRequiredDate"></strong>
      </div>
    </div>
  </div>

  <div class="row">

    <!-- LEFT COLUMN -->
    <div class="col-md-6">

      <!-- Pricing -->
      <div class="card mb-4">
        <div class="card-header bg-primary d-flex justify-content-start align-items-center">
          <h6 class="mb-0"><i class="bi bi-currency-dollar me-2"></i>Pricing</h6>
        </div>
        <div class="card-body">

          <%= f.input :unit_price,
              required: true,
              wrapper: :input_group,
              # prepend: '$',
              input_html: { step: 0.0001, min: 0, placeholder: '0.0000' } %>

          <%= f.input :currency,
              collection: [['USD', 'USD'], ['CAD', 'CAD']], input_html: {class: 'form-control', include_blank: false} %>

          <hr>

          <h6 class="text-muted mb-3">Additional Costs</h6>

          <div class="row">
            <div class="col-6">
              <%= f.input :tooling_cost, wrapper: :input_group %>
            </div>
            <div class="col-6">
              <%= f.input :setup_cost, wrapper: :input_group %>
            </div>
            <div class="col-6">
              <%= f.input :shipping_cost, wrapper: :input_group %>
            </div>
            <div class="col-6">
              <%= f.input :other_charges, wrapper: :input_group %>
            </div>
          </div>

        </div>
      </div>

      <!-- Delivery -->
      <div class="card mb-4">
        <div class="card-header bg-primary d-flex justify-content-start align-items-center">
          <h6 class="mb-0"><i class="bi bi-truck me-2"></i>Delivery</h6>
        </div>
        <div class="card-body">

          <div class="row">
            <div class="col-md-6">
              <%= f.input :lead_time_days, required: true, input_html: { min: 1 } %>
            </div>
            <div class="col-md-6">
              <%= f.input :promised_delivery_date, as: :date, input_html: {class: 'form-control'} %>
            </div>
          </div>

          <%= f.input :can_meet_required_date, as: :boolean %>
          <%= f.input :partial_delivery_offered, as: :boolean %>

        </div>
      </div>

    </div>

    <!-- RIGHT COLUMN -->
    <div class="col-md-6">

      <!-- Order Parameters -->
      <div class="card mb-4">
        <div class="card-header bg-primary d-flex justify-content-start align-items-center">
          <h6 class="mb-0"><i class="bi bi-box me-2"></i>Order Parameters</h6>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4"><%= f.input :minimum_order_quantity %></div>
            <div class="col-md-4"><%= f.input :order_multiple %></div>
            <div class="col-md-4"><%= f.input :units_per_package %></div>
          </div>
        </div>
      </div>

      <!-- Terms -->
      <div class="card mb-4">
        <div class="card-header bg-primary d-flex justify-content-start align-items-center">
          <h6 class="mb-0"><i class="bi bi-file-text me-2"></i>Terms</h6>
        </div>
        <div class="card-body">
          <%= f.input :payment_terms, placeholder: 'e.g., Net 30' %>
          <%= f.input :warranty_period, placeholder: 'e.g., 12 months' %>
        </div>
      </div>

      <!-- Quality -->
      <div class="card mb-4">
        <div class="card-header bg-primary d-flex justify-content-start align-items-center">
          <h6 class="mb-0"><i class="bi bi-shield-check me-2"></i>Quality</h6>
        </div>
        <div class="card-body">
          <%= f.input :meets_specifications, as: :boolean %>
          <%= f.input :certifications_included, as: :boolean %>
          <%= f.input :samples_available, as: :boolean %>
        </div>
      </div>

    </div>
  </div>

  <!-- Quote Validity -->
  <div class="card mb-4">
    <div class="card-header bg-primary d-flex justify-content-start align-items-center">
      <h6 class="mb-0"><i class="bi bi-calendar-check me-2"></i>Quote Validity</h6>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <%= f.input :quote_date, as: :date, required: true, input_html: { value: Date.current, class: 'form-control' } %>
        </div>
        <div class="col-md-6">
          <%= f.input :quote_valid_until, as: :date, required: true,
              input_html: { value: 30.days.from_now, class: 'form-control' } %>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes -->
  <%#= f.input :notes, as: :text, input_html: { rows: 3 } %>

  <!-- Actions -->
  <div class="d-flex justify-content-between mt-4">
    <%= link_to 'Cancel', rfq_path(rfq), class: 'btn btn-outline-secondary' %>
    <%= f.button :submit, 'Submit Quote', class: 'btn btn-primary btn-lg' %>
  </div>

<% end %>

