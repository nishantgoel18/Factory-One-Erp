
<div class="main-content">
  <%= render 'layouts/alerts' %>

  <div class="container-fluid">
    <div class="page-header">
      <h2 class="header-title">Executive Summary</h2>
    </div>
    <div class="row">
      <!-- LEFT SIDE -->
      <div class="col-lg-6 ">
        <!-- Top 4 KPI Cards -->
        <div class="row">
          <!-- Production Output -->
          <div class="col-md-6 col-lg-6 ">
            <div class="card">
              <div class="card-body">
                <div class="media align-items-center">
                  <div class="avatar avatar-icon avatar-lg avatar-blue">
                    <i class="anticon anticon-dashboard"></i>
                  </div>
                  <div class="m-l-15">
                    <h2 class="m-b-0">12,450</h2>
                    <p class="m-b-0 text-muted">Total Mint Month</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- OEE -->
          <div class="col-md-6 col-lg-6">
            <div class="card">
              <div class="card-body">
                <div class="media align-items-center">
                  <div class="avatar avatar-icon avatar-lg avatar-green">
                    <i class="anticon anticon-line-chart"></i>
                  </div>
                  <div class="m-l-15">
                    <h2 class="m-b-0">85%</h2>
                    <p class="m-b-0 text-muted">OEE <span class="text-success">+8%</span></p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Sales vs Target -->
          <div class="col-md-6 col-lg-6">
            <div class="card">
              <div class="card-body">
                <div class="media align-items-center">
                  <div class="avatar avatar-icon avatar-lg avatar-purple">
                    <i class="anticon anticon-dollar"></i>
                  </div>
                  <div class="m-l-15">
                    <h2 class="m-b-0">$2.3M</h2>
                    <p class="m-b-0 text-muted">Sales vs Target (110%)</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

        

          <div class="col-md-6 col-lg-6">
            <div class="card">
              <div class="card-body">
                <div class="media align-items-center">
                  <div class="avatar avatar-icon avatar-lg avatar-cyan">
                    <i class="anticon anticon-pie-chart"></i>
                  </div>
                  <div class="m-l-15">
                    <h2 class="m-b-0">18.5%</h2>
                    <p class="m-b-0 text-muted">Profit Margin</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Monthly Trend Chart -->
        <div class="card">
          <div class="card-body">
            <h5 class="m-b-20">Monthly Trend</h5>
            <canvas id="line-chart" height="120"></canvas>
          </div>
        </div>
      </div>

      <!-- RIGHT SIDE -->
      <div class="col-lg-6">
        <div class="row">
          <div class="col-md-6 col-lg-12">
            <div class="card">
              <div class="card-body">
                <div class="media align-items-center">
                  <div class="avatar avatar-icon avatar-lg avatar-gold">
                    <i class="anticon anticon-database"></i>
                  </div>
                  <div class="m-l-15">
                    <h2 class="m-b-0">$950k</h2>
                    <p class="m-b-0 text-muted">Inventory Value</p>
                  </div>
                </div>
              </div>
            </div>
          </div> 

            <!-- Key Alerts -->
          <div class="col-md-6 col-lg-12">
            <div class="card">
              <div class="card-body">
                <h5 class="m-b-10">Key Alerts</h5>
                <ul class="list-unstyled m-b-0 text-muted">
                  <li>2 Delays</li>
                  <li>1 Stockout</li>
                  <li>4 Quality Issues</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Department Contribution Chart -->
        <div class="card">
          <div class="card-body">
            <h5 class="m-b-20">Department Contribution</h5>
            <canvas id="bar-chart" height="120"></canvas>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="{% static 'assets/vendors/chartjs/Chart.min.js' %}"></script>


<script>
document.addEventListener('DOMContentLoaded', function () {

  // ----- Line Chart -----
  const ctxLine = document.getElementById("line-chart").getContext('2d');
  new Chart(ctxLine, {
    type: 'line',
    data: {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"],
      datasets: [{
        label: "Production Output",
        borderColor: "#3b82f6",
        backgroundColor: "rgba(59,130,246,0.1)",
        data: [4000, 8000, 9000, 12000, 12000, 13000, 16000],
        tension: 0.4,
        fill: true,
        borderWidth: 2,
        pointRadius: 3,
        pointBackgroundColor: "#3b82f6"
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: "#6b7280" }, grid: { display: false } },
        y: {
          ticks: {
            color: "#6b7280",
            stepSize: 4000,
            callback: value => value >= 1000 ? (value / 1000) + 'k' : value
          },
          grid: { color: "#e5e7eb", borderDash: [3, 3] },
          beginAtZero: true,
          suggestedMax: 16000
        }
      }
    }
  });

  // ----- Bar Chart -----
  const ctxBar = document.getElementById("bar-chart").getContext('2d');
  new Chart(ctxBar, {
    type: 'bar',
    data: {
      labels: ["Dept A", "Dept B", "Dept C", "Dept D"],
      datasets: [{
        label: "Contribution",
        backgroundColor: "#3b82f6",
        data: [18, 30, 34, 40]
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: "#6b7280" }, grid: { display: false } },
        y: {
          ticks: { color: "#6b7280", callback: value => value + "%" },
          beginAtZero: true,
          max: 40,
          grid: { color: "#e5e7eb", borderDash: [3, 3] }
        }
      }
    }
  });

});
</script>
