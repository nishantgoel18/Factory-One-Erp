<%# app/views/customers/index.html.erb %>

<div class="main-content">
  <%= render 'layouts/alerts' %>

  <div class="page-header">
    <h2 class="header-title">Customers</h2>

    <div class="header-sub-title">
      <nav class="breadcrumb breadcrumb-dash">
        <%= link_to raw('<i class="anticon anticon-home m-r-5"></i>Home'), root_path, class: "breadcrumb-item" %>
        <%= link_to "Sales", "#", class: "breadcrumb-item" %>
        <span class="breadcrumb-item active">Customers</span>
      </nav>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">

          <div class="m-t-10">
            <%= link_to "New Customer", new_customer_path, class: "btn btn-primary btn-sm" %>
            <br><br>

            <div class="table-responsive">
              <table class="table admins_table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Code</th>
                    <th>Name</th>
                    <th>Customer Type</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Country</th>
                    <th>Active?</th>
                    <th>Created At</th>
                    <th>Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <% @customers.each do |customer| %>
                    <tr>
                      <td><%= customer.id %></td>
                      <td><%= customer.code %></td>
                      <td><%= customer.display_name %></td>
                      <td><%= Customer::CUSTOMER_TYPES[customer.customer_type] || "-" %></td>
                      <td><%= customer.email.presence || "-" %></td>
                      <td><%= customer.phone_number.presence || "-" %></td>
                      <td><%= customer.billing_country %></td>
                      <td><%= customer.is_active ? "Yes" : "No" %></td>
                      <td><%= customer.created_at.strftime("%b %d, %Y") %></td>

                      <td>
                        <%= link_to "View", delete_customer_path(customer) %> |
                        <%= link_to "Edit", edit_customer_path(customer) %> |
                        <%= link_to "Delete",
                            customer_path(customer),
                            method: :delete,
                            class: "confirm-delete",
                            data: { confirm: "Are you sure?" }, class: "confirm-delete"  %>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

</div>