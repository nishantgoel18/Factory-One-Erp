<div class="tab-pane fade" id="quality">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">Quality Issues</h5>
    <a href="<%= new_supplier_quality_issue_url(@supplier) %>" class="btn btn-sm btn-primary">
      <i class="bi bi-plus-circle"></i> Log Issue
    </a>
  </div>
  
  <div id="qualityIssuesList">
    <% if @quality_issues.any? %>
      <div class="table-responsive">
        <table class="table table-hover">
          <thead class="table-light">
            <tr>
              <th>Issue #</th>
              <th>Date</th>
              <th>Title</th>
              <th>Product</th>
              <th>Severity</th>
              <th>Status</th>
              <th>Financial Impact</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @quality_issues.each do |issue| %>
              <tr>
                <td><strong><%= issue.issue_number %></strong></td>
                <td><%= issue.issue_date.strftime('%m/%d/%Y') %></td>
                <td><%= issue.issue_title %></td>
                <td>
                  <% if issue.product %>
                    <%= issue.product.item_code %>
                  <% else %>
                    <span class="text-muted">General</span>
                  <% end %>
                </td>
                <td>
                  <span class="badge bg-<%= issue.severity == 'CRITICAL' ? 'danger' : issue.severity == 'MAJOR' ? 'warning' : 'info' %>">
                    <%= issue.severity %>
                  </span>
                </td>
                <td>
                  <span class="badge bg-<%= issue.status == 'OPEN' ? 'danger' : issue.status == 'RESOLVED' ? 'success' : 'secondary' %>">
                    <%= issue.status %>
                  </span>
                </td>
                <td>
                  <% if issue.financial_impact %>
                    <%= number_to_currency(issue.financial_impact) %>
                  <% else %>
                    -
                  <% end %>
                </td>
                <td>
                  <div class="btn-group btn-group-sm">
                    <a class="btn btn-outline-primary" href="<%= edit_supplier_quality_issue_url(@supplier, issue) %>">
                      <i class="anticon anticon-edit"></i>
                    </a>
                    <!--<button class="btn btn-outline-info" onclick="viewQualityIssue(<%= issue.id %>)">
                      <i class="anticon anticon-eye"></i>-->
                    </button>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="text-center py-5 text-muted">
        <i class="bi bi-shield-check" style="font-size: 3rem;"></i>
        <p class="mt-3">No quality issues reported</p>
      </div>
    <% end %>
  </div>
</div>
