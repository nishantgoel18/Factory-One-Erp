<!-- app/views/rfqs/_rfq_item_fields.html.erb -->
<!-- Simple Form Partial for RFQ Item Row -->

<tr class="item-row">

  <!-- Line Number -->
  <td>
    <%= f.collection_select :product_id,
        Product.bom_item_components.non_deleted.order(:sku),
        :id, :name_with_sku,
        { include_blank: 'Select Product (or enter description)' },
        { class: 'form-control form-control-sm mb-1 product-select' } %>
    <%= f.hidden_field :line_number %>
  </td><!-- Item Description -->
  <td>
    <%= f.input :item_description,
        label: false,
        required: true,
        input_html: {
          class: 'form-control form-control-sm mt-2',
          placeholder: 'Item description'
        } %>

    <%= f.hidden_field :line_number, class: 'line-number-hidden' %>
  </td>

  <!-- Quantity -->
  <td>
    <%= f.input :quantity_requested,
        label: false,
        required: true,
        input_html: {
          class: 'form-control form-control-sm mt-2',
          min: 0,
          step: 1,
          placeholder: '0'
        } %>
  </td>

  <!-- UOM -->
  <td>
    <%= f.input :unit_of_measure,
        label: false,
        collection: UnitOfMeasure.non_deleted.all,
        label_method: :name,
        value_method: :name,
        prompt: 'Select UOM', input_html: {
          class: 'form-control mt-2 form-control-sm'
        } %>
  </td>
  

  <!-- Target Price -->
  <td>
    <%= f.input :target_unit_price,
        label: false,
        input_html: {
          class: 'form-control mt-2 form-control-sm',
          min: 0,
          step: 0.01,
          placeholder: '0.00'
        } %>
  </td>

  <!-- Required Date -->
  <td>
    <%= f.input :required_delivery_date,
        label: false,
        as: :date,
        input_html: {
          class: 'form-control mt-2 form-control-sm'
        } %>
  </td>

  <!-- Critical Flag -->
  <td class="text-center">
    <%= f.input :is_critical_item,
        label: false,
        as: :boolean,
        input_html: { class: 'form-check-input mt-2' } %>
  </td>

  <!-- Actions -->
  <td>
    <% if f.object.persisted? %>
      <%= f.input :_destroy,
          as: :boolean,
          label: false,
          wrapper: false,
          input_html: {
            class: 'form-check-input d-none destroy-flag'
          } %>
    <% end %>

    <button type="button" class="btn btn-xs btn-outline-danger remove-item">
      <i class="anticon anticon-delete"></i>
    </button>
  </td>

</tr>